<h1>Listing budget categories</h1>

<table>
  <tr>
    <th>Category</th>
    <th>Amount</th>
    <th>Period</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @budget_total = 0 %>
<% @budget_categories.each do |budget_category| %>
  <tr>
    <td><%= budget_category.category.nil? ? 'invalid(' +  budget_category.id.to_s + ')' : budget_category.category.name %></td>
    <td><%= budget_category.amount %></td> 
    <td><%= budget_category.period %></td>
    <td><%= link_to 'Show', budget_category_path(params[:budget_id],budget_category) %></td>
    <% @budget_total += budget_category.amount %>
  </tr>
<% end %>
  <tr><td colspan='4' align='right'>Total: <%= @budget_total %></td>
  </tr>
</table>

<br />

