<h1>My Accounts</h1>

<table class="table table-striped table-condensed">
  <tr>
    <th>Name</th>
    <th>First Transaction</th>
    <th>Most Recent</th>
    <th>Transactions</th>
    <th>Tx / Month</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

  <% @accounts.each do |account| %>
    <% tx_count = account.transactions.count %> 
    <tr>
      <td><%= account.name %></td>
      <td><%= account.transactions[tx_count-1].tx_date.strftime('%b %e, %Y') %></td>
      <td><%= account.transactions[0].tx_date.strftime('%b %e, %Y') %></td>
      <td><%= tx_count %></td>
      <td><%= account.transactions_per_month %></td>
      <td><%= link_to 'Show', account %></td>
      <td><%= link_to 'Edit', edit_account_path(account) %></td>
      <td><%= link_to 'Delete', account, confirm: 'Are you sure?', method: :delete %></td>
    </tr>
  <% end %>

</table>

<br />

<%= link_to 'New Account', new_account_path %>
