<h3>My Spending Accounts</h3>

<table class="table table-striped table-condensed">
	<tr>
		<th>Name</th>
		<th>Account Type</th>
		<th>First Transaction</th>
		<th>Most Recent</th>
		<th>Transactions</th>
		<th></th>
	</tr>

	<% @accounts_array.each do |account_info| %>
		<% account = account_info["account"] %>
		<tr>
			<td><%= account.name %></td>
			<td><%= account.account_type %></td>

			<% if account_info["tx_count"] > 0 %>
				<td><%= account_info["tx_first"].strftime('%b %e, %Y') %></td>
				<td><%= account_info["tx_last"].strftime('%b %e, %Y') %></td>
			<% else %>
				<td>-</td><td>-</td>
			<% end %>

			<td><%= account_info["tx_count"] %></td>

			<td>
				<%= link_to 'Show', account_path(account), class: 'btn btn-primary' %>
				<%= link_to 'Edit', edit_account_path(account), class: 'btn btn-warning' %>
				<%= link_to 'Delete', account_path(account), method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-danger' %>
			</td>
		</tr>
	<% end %>

</table>

<h3>All Categories</h3>

<table class="table table-striped table-condensed">
	<tr>
		<th>Name</th>
		<th>Desription</th>
		<th>Type</th>
		<th>Action</th>
	</tr>

	<% @allAccounts.each do |cat| %>
		<tr>
			<td><%= cat.name %></td>
			<td><%= cat.description %></td>
			<td><%= cat.account_type %></td>
			<td>
				<div class="dropdown">
					<a class="btn btn-sm" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						...
					</a>
					<div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
						<a class="dropdown-item" href="<%= edit_account_path(:id => cat.id)%>">Edit</a>
						<%= link_to( "Delete", cat, method: :delete, data: { confirm: 'Delete Category?' }, class: "dropdown-item") %>
					</div>
				</div>
			</td>
		</tr>
	<% end %>

</table>

<br />

<%= link_to 'New Account', new_account_path %>
