<div class="row px-4">
  <div class="col-md-4">
    <h3>Account Details:</h3>

    <table class="table">
      <tbody>
        <tr>
          <td class="bg-light"><strong>Name</strong></td>
          <td><%= @account.name %></td>
        </tr>
        <tr>
          <td class="bg-light"><strong>Description</strong></td>
          <td><%= @account.description %></td>
        </tr>
        <tr>
          <td class="bg-light"><strong>Account Type</strong></td>
          <td><%= @account.account_type %></td>
        </tr>
        <tr>
          <td class="bg-light"><strong>Import Class</strong></td>
          <td><%= @account.import_class %></td>
        </tr>
      </tbody>
    </table>

    <%= link_to 'Edit', edit_account_path(@account), class: 'btn btn-primary' %>
    <%= link_to 'Back to Accounts', accounts_path, class: 'btn btn-secondary' %>
  </div>


<div class="col-md-8">
<h3>Monthly Balance:</h3>
  <ul class="nav nav-tabs" id="myTab" role="tablist">
    <li class="nav-item">
      <a class="nav-link" id="table-tab" data-toggle="tab" href="#table" role="tab" aria-controls="table" aria-selected="false">Table</a>
    </li>
    <li class="nav-item">
      <a class="nav-link active" id="chart-tab" data-toggle="tab" href="#chart" role="tab" aria-controls="chart" aria-selected="true">Chart</a>
    </li>
  </ul>
  <div class="tab-content" id="myTabContent">
    <div class="tab-pane fade show active" id="chart" role="tabpanel" aria-labelledby="chart-tab">
      <div id="multiBarChart" style="height: 400px;"></div>
    </div>
    <div class="tab-pane fade" id="table" role="tabpanel" aria-labelledby="table-tab">
      <table class="table table-striped table-condensed text-center">
      <tr>
        <th>Month</th>
        <th>Credits</th>
        <th>Debits</th>
        <th>Balance</th>
      </tr>
      <% @monthly_balance.each do |month| %>
        <tr>
        <td><%= month[:month] %></td>
        <td><%= number_to_currency(month[:credits]) %></td>
        <td><%= number_to_currency(month[:debits]) %></td>
        <td><%= number_to_currency(month[:balance]) %></td>
        </tr>
      <% end %>
      </table>
    </div>
  </div>
</div>

<script>
  var multiBarData = gon.echart;

  // Initialize the multi-bar chart
  var multiBarChart = echarts.init(document.getElementById('multiBarChart'));

  // Configure the multi-bar chart options
  var multiBarOptions = {
    tooltip: {
      trigger: 'axis',
      axisPointer: {
        type: 'shadow'
      },
      formatter: function(params) {
        var tooltipText = params[0].axisValueLabel + '<br/>';
        params.forEach(function(param) {
          tooltipText += param.marker + ' ' + param.seriesName + ': $' + param.value + '<br/>';
        });
        return tooltipText;
      }
    },
    legend: {
      data: multiBarData.map(function (item) {
        return item.name;
      }),
      selected: {
        'Credits': false,
        'Debits': false
      }
    },
    xAxis: {
      type: 'category',
      data: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
    },
    yAxis: {
      type: 'value',
      axisLabel: {
        formatter: function(value) {
          return '$' + value;
        }
      }
    },
    series: multiBarData.map(function (item) {
      return {
        name: item.name,
        type: 'bar',
        data: item.values
      };
    })
  };

  // Set the multi-bar chart options
  multiBarChart.setOption(multiBarOptions);
</script>