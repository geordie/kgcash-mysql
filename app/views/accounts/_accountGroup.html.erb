<% if !accounts.nil? %>

<div class="accordion" id="<%= id + 'Accordion'%>">
  <div class="card">
	<div class="card-header" id="<%= id + 'Heading'%>">
	  <h2 class="mb-0">
		<button class="btn" type="button" data-toggle="collapse" data-target="#<%= id + 'Collapse'%>" aria-expanded="false" aria-controls="<%= id + 'Collapse'%>">
		  <h3><%= title %></h3>
		</button>
	  </h2>
	</div>

	<div id="<%= id + 'Collapse'%>" class="collapse" aria-labelledby="<%= id + 'Heading'%>" data-parent="#<%= id + 'Accordion'%>">
	  <div class="card-body">
		<table class="table table-striped table-condensed">
		  <tr>
			<th>Name</th>
			<th>Description</th>
			<th>Credit</th>
			<th>Debit</th>
			<th>Balance</th>
			<th>Action</th>
		  </tr>

		  <% accounts.each do |acct| %>
		  <% credits = acct.credits(year)%>
		  <% debits = acct.debits(year)%>
		  <% balance = (credits - debits).abs%>
			<tr>
			  <td><%= link_to acct.name, account_path(acct)%></td>
			  <td><%= acct.description %></td>
			  <td><%= number_to_currency( credits, precision:0) %></td>
			  <td><%= number_to_currency( debits, precision: 0) %></td>
			  <td><%= number_to_currency( balance, precision:0) %></td>
			  <td>
				<div class="dropdown">
				  <a class="btn btn-sm" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
					...
				  </a>
				  <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
					<a class="dropdown-item" href="<%= edit_account_path(:id => acct.id)%>">Edit</a>
					<%= link_to( "Delete", acct, method: :delete, data: { confirm: 'Delete Category?' }, class: "dropdown-item") %>
				  </div>
				</div>
			  </td>
			</tr>
		  <% end %>
		</table>
	  </div>
	</div>
  </div>
</div>

<% end %>