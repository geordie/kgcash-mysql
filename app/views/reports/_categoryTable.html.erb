<script type="text/javascript">

var tableData = buildMonthlyCategoryReport( <%= local_assigns[:gonData] %>, "<%= local_assigns[:valueField] %>" );

console.log("tableData", tableData);

var columns = [
    { head: 'Category', cl: 'title' },
    { head: 'Jan', cl: 'center' },
    { head: 'Feb', cl: 'center' },
    { head: 'Mar', cl: 'num' },
    { head: 'Apr', cl: 'num' },
    { head: 'May', cl: 'num' },
    { head: 'Jun', cl: 'num' },
    { head: 'Jul', cl: 'num' },
    { head: 'Aug', cl: 'num' },
    { head: 'Sep', cl: 'num' },
    { head: 'Oct', cl: 'num' },
    { head: 'Nov', cl: 'num' },
    { head: 'Dec', cl: 'num' },
];

var domId = "<%= local_assigns[:domId] ? "#" + domId : "#chartStacked" %>";

var table = d3.select(domId)
  .attr('class', 'table table-striped table-condensed')
  .append("table");

 // create table header
table.append('thead').append('tr')
  .selectAll('th')
  .data(columns).enter()
  .append('th')
  .attr('class', function(d){return d.cl;})
  .text(function(d){return d.head;});

// create table body
table.append('tbody')
  .selectAll('tr')
  .data(tableData)
  .enter()
  .append('tr')
  .selectAll('td')
  .data(function(row, i){
    return row;
  }).enter()
  .append('td')
  .html(function(d){return d;});

</script>